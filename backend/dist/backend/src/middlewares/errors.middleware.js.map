{
  "version": 3,
  "sources": ["../../../../src/middlewares/errors.middleware.ts"],
  "sourcesContent": ["import { Request, Response, NextFunction } from 'express'\r\nimport { omit } from 'lodash'\r\nimport { StatusCodes } from 'http-status-codes'\r\nimport { ErrorWithStatus } from '@/models/errors/Errors.schema'\r\n\r\nexport const defaultErrorHandler = (err: any, req: Request, res: Response, next: NextFunction) => {\r\n  try {\r\n    if (err instanceof ErrorWithStatus) {\r\n      return res.status(err.statusCode).json(omit(err, ['statusCode']))\r\n    }\r\n    // Print out stacktrace to find bug easier\r\n    console.error(err)\r\n    const finalError: any = {}\r\n    Object.getOwnPropertyNames(err).forEach((key) => {\r\n      if (!Object.getOwnPropertyDescriptor(err, key)?.configurable || !Object.getOwnPropertyDescriptor(err, key)?.writable) {\r\n        return\r\n      }\r\n      finalError[key] = err[key]\r\n    })\r\n    res.status(StatusCodes.INTERNAL_SERVER_ERROR).json({\r\n      message: finalError.message,\r\n      errorInfo: omit(finalError, ['stack'])\r\n    })\r\n  } catch (error) {\r\n    res.status(StatusCodes.INTERNAL_SERVER_ERROR).json({\r\n      message: 'Internal server error',\r\n      errorInfo: omit(error as any, ['stack'])\r\n    })\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAqB;AACrB,+BAA4B;AAC5B,oBAAgC;AAEzB,MAAM,sBAAsB,CAAC,KAAU,KAAc,KAAe,SAAuB;AAChG,MAAI;AACF,QAAI,eAAe,+BAAiB;AAClC,aAAO,IAAI,OAAO,IAAI,UAAU,EAAE,SAAK,oBAAK,KAAK,CAAC,YAAY,CAAC,CAAC;AAAA,IAClE;AAEA,YAAQ,MAAM,GAAG;AACjB,UAAM,aAAkB,CAAC;AACzB,WAAO,oBAAoB,GAAG,EAAE,QAAQ,CAAC,QAAQ;AAC/C,UAAI,CAAC,OAAO,yBAAyB,KAAK,GAAG,GAAG,gBAAgB,CAAC,OAAO,yBAAyB,KAAK,GAAG,GAAG,UAAU;AACpH;AAAA,MACF;AACA,iBAAW,GAAG,IAAI,IAAI,GAAG;AAAA,IAC3B,CAAC;AACD,QAAI,OAAO,qCAAY,qBAAqB,EAAE,KAAK;AAAA,MACjD,SAAS,WAAW;AAAA,MACpB,eAAW,oBAAK,YAAY,CAAC,OAAO,CAAC;AAAA,IACvC,CAAC;AAAA,EACH,SAAS,OAAP;AACA,QAAI,OAAO,qCAAY,qBAAqB,EAAE,KAAK;AAAA,MACjD,SAAS;AAAA,MACT,eAAW,oBAAK,OAAc,CAAC,OAAO,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACF;",
  "names": []
}
