{
  "version": 3,
  "sources": ["../../../../src/middlewares/uploadFile.middleware.ts"],
  "sourcesContent": ["import { StatusCodes } from 'http-status-codes'\r\nimport multer from 'multer'\r\nimport path from 'path'\r\nimport { VALIDATION_MESSAGES } from '@/constants/message'\r\nimport { ErrorWithStatus } from '@/models/errors/Errors.schema'\r\n\r\nconst multerMiddleware = multer({\r\n  limits: {\r\n    fieldSize: 50 * 1024 * 1024\r\n  },\r\n  fileFilter: (req, file, callback) => {\r\n    if (!file) {\r\n      return callback(new Error('File not found'))\r\n    }\r\n\r\n    const filetypes = /jpeg|jpg|png|gif/\r\n    const extname = filetypes.test(path.extname(file.originalname).toLowerCase())\r\n    const mimetype = filetypes.test(file.mimetype)\r\n\r\n    if (extname && mimetype) {\r\n      return callback(null, true)\r\n    }\r\n\r\n    callback(\r\n      new ErrorWithStatus({\r\n        statusCode: StatusCodes.BAD_REQUEST,\r\n        message: VALIDATION_MESSAGES.UPLOAD.IMAGE.INVALID_IMAGE_EXTENSION\r\n      })\r\n    )\r\n  }\r\n})\r\n\r\nexport default multerMiddleware\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAA4B;AAC5B,oBAAmB;AACnB,kBAAiB;AACjB,qBAAoC;AACpC,oBAAgC;AAEhC,MAAM,uBAAmB,cAAAA,SAAO;AAAA,EAC9B,QAAQ;AAAA,IACN,WAAW,KAAK,OAAO;AAAA,EACzB;AAAA,EACA,YAAY,CAAC,KAAK,MAAM,aAAa;AACnC,QAAI,CAAC,MAAM;AACT,aAAO,SAAS,IAAI,MAAM,gBAAgB,CAAC;AAAA,IAC7C;AAEA,UAAM,YAAY;AAClB,UAAM,UAAU,UAAU,KAAK,YAAAC,QAAK,QAAQ,KAAK,YAAY,EAAE,YAAY,CAAC;AAC5E,UAAM,WAAW,UAAU,KAAK,KAAK,QAAQ;AAE7C,QAAI,WAAW,UAAU;AACvB,aAAO,SAAS,MAAM,IAAI;AAAA,IAC5B;AAEA;AAAA,MACE,IAAI,8BAAgB;AAAA,QAClB,YAAY,qCAAY;AAAA,QACxB,SAAS,mCAAoB,OAAO,MAAM;AAAA,MAC5C,CAAC;AAAA,IACH;AAAA,EACF;AACF,CAAC;AAED,IAAO,gCAAQ;",
  "names": ["multer", "path"]
}
